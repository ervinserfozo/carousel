/**
 * Created by Ervin on 26.2.2017..
 */
window.onload=function(){var a=function(){var a,b,c,d,f,g,h,i,e="standard",j=[],k=[],l=function(c){if(null!=c&&(e=c),null==a)throw"Creator class must be set.";if(null==b)throw"Collector class must be set.";q(),r(),j=b.collectImages(),t(),s()},m=function(b){a=b},n=function(a){b=a},o=function(a){c=a},p=function(a){d=a},q=function(){f=a.createGalleryHolder(),g=a.createRealImageHolder(),h=a.createThumbnailHolder(),i=a.createProgressBar()},r=function(){f.appendChild(g),y(),f.appendChild(i),f.appendChild(h),document.body.appendChild(f)},s=function(){var b=j[0],c=k[0],e=a.createRealImage(b);u(e),w(c),d.clockWise(k,c)},t=function(){j.forEach(function(b){var c=a.createThumbnailElement(b);x(c),k.push(c),h.appendChild(c)})},u=function(a){c.init(i,g,a,"fancy2")},v=function(b){var c=b.target,e=c.getAttribute("data"),f=a.createRealImage(e);u(f),w(c),d.clockWise(k,c)},w=function(a){k.forEach(function(a){a.classList.remove("active")}),a.classList.add("active")},x=function(a){a.addEventListener("click",v),a.addEventListener("mouseover",d.stopRotation),a.addEventListener("mouseout",d.startRotator)},y=function(){g.addEventListener("mouseover",d.stopRotation),g.addEventListener("mouseout",d.startRotator)};return{init:l,setCreator:m,setCollector:n,setAnimator:o,setRotator:p}}(),b=function(){var a=function(){var a=b(),c=document.createElement("div");return c.setAttribute("class","cGalleryHolder"),c.style.position="relative",c.appendChild(a),c},b=function(){var a=document.createElement("div");return a.setAttribute("class","cGalleryBackground"),a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.backgroundColor="#cac8c8",a.style.borderRadius="10px",a.style.opacity=".7",a.style.zIndex=-1,a},c=function(){var a=document.createElement("div");return a.setAttribute("class","cProgressBar"),a.style.height="2px",a.style.backgroundColor="#0cb2ff",document.addEventListener("intervalStart",function(){a.classList.add("intervalStart")}),document.addEventListener("intervalStop",function(){a.classList.remove("intervalStart")}),a},d=function(){var a=document.createElement("div");return a.setAttribute("class","cRealImageHolder"),a.style.position="relative",a},e=function(a){var b=document.createElement("img");return b.setAttribute("src",a),b.style.width="100%",b},f=function(){var a=document.createElement("div");return a.setAttribute("class","cThumbnailHolder"),a.style.position="relative",a.style.height="30px",a.style.padding="10px",a},g=function(a){var b=document.createElement("div");return b.setAttribute("class","cThumbnail"),b.style.position="relative",b.setAttribute("data",a),b.style.backgroundImage="url('"+a+"')",b};return{createGalleryHolder:a,createGalleryBackground:b,createProgressBar:c,createRealImageHolder:d,createRealImage:e,createThumbnailHolder:f,createThumbnailElement:g}},c=function(){var a=document.getElementsByClassName("imageCollection")[0].children,b=[],c=function(){for(var c=0;c<=a.length-1;c++)b.push(a[c].getAttribute("href"));return b};return{collectImages:c}},d=function(){var a,b,c,d=function(d,h,i,j){a=d,b=h,c=i,c.onload=function(){switch(j){case"standard":e();break;case"fancy":f();break;case"fancy2":g();break;default:e()}}},e=function(){var d=b.children;c.classList.add("new"),c.classList.add("standard"),a.classList.remove("intervalStart"),d.length>0&&(d[0].classList.remove("current"),d[0].classList.add("new")),b.appendChild(c),i(c),c.classList.remove("new"),c.classList.add("current"),a.classList.add("intervalStart"),h()},f=function(){var d=b.children;c.classList.add("new"),c.classList.add("fancy"),a.classList.remove("intervalStart"),0!=d.length&&(d[0].classList.remove("new"),d[0].classList.remove("top"),d[0].classList.add("bottom")),b.appendChild(c),i(c),c.classList.remove("new"),c.classList.add("top"),a.classList.add("intervalStart"),h()},g=function(){var d=b.children;c.classList.add("new"),c.classList.add("fancy2"),a.classList.remove("intervalStart"),0!=d.length&&(d[0].classList.remove("new"),d[0].classList.remove("top"),d[0].classList.add("bottom")),b.appendChild(c),i(c),c.classList.remove("new"),c.classList.add("top"),a.classList.add("intervalStart"),h()},h=function(){var a=b.children;setTimeout(function(){a.length>1&&("function"==typeof a[0].remove?a[0].remove():a[0].outerHTML="")},1e3)},i=function(a){var c=j(a);b.style.height=c+"px"},j=function(a){var b=a.height,c=a.width;return b/(c/560)};return{init:d}},e=function(){var c,a="started",b=0,d=setInterval(i,1e4),e=function(a,d){g(),c=a,void 0!=d&&(b=a.indexOf(d)),h()},g=function(){"started"==a&&(clearInterval(d),a="stopped",document.dispatchEvent(window.intervalStop))},h=function(){"stopped"==a&&(d=setInterval(i,1e4),a="started",document.dispatchEvent(window.intervalStart))},i=function(){c.length-1>=b+1?c[b+1].click():c[0].click()};return{clockWise:e,startRotator:h,stopRotation:g}},f=function(a){window[a]=new CustomEvent(a)};f("intervalStart"),f("intervalStop"),a.setCreator(new b),a.setCollector(new c),a.setAnimator(new d),a.setRotator(new e),a.init()};